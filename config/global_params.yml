# ==============================================================================
# PROJECT CONFIGURATION: CLR Network Inference
# ==============================================================================

# --- Setup ---
output_root: "results"
project_name: "longsurvivors"
input_file: "/mnt/c/Users/Davide/Desktop/Davide/bandi/0dottorato/projects/long survivors/DB_standardizzatov4.xlsx"

# --- ANALYSIS TARGETS (Single Source of Truth) ---
# Define here exactly which groups form the analysis.
# Names must match the values in the 'stratification.column' (e.g., Original_Source).
control_group: "Healthy_Donors"
case_groups: ["NSCLC_LS", "NSCLC", "HNSCC", "HNSCC_LS"]  # Example: Selecting only LS groups

# --- STRATIFICATION LOGIC ---
# "selection" mode simply promotes the target column to be the main grouping variable.
stratification:
  mode: "selection"             # Mode: direct selection from metadata
  column: "Original_Source"     # Metadata column containing the precise group names

# --- COHORTS MAPPING ---
cohorts:
  NSCLC: "NSCLC"
  HNSCC: "HNSCC"
  Healthy: "Healthy_Donors"

marker_selection:
  whitelist: []      
  blacklist: [] 

hybrid_groups:
  Differentiation: ["CM", "EFF", "EM", "NAIVE"]
  Lineage: ["CD4", "CD8"]  
  Treg_Status: ["RESTING", "ACTIVE", "NON-SUPPRESSIVE"]
  
metadata:
  subgroup_col: "Original_Source"

# --- VISUALS & COLORS ---
colors:
  control: "#2E8B57"         # Healthy Green
  
  # Palette for generic case mapping if specific names are not found below
  cases: ["#CD5C5C", "#4682B4", "#9932CC", "#FF8C00"] 

  # Specific color mapping for precise group names found in Original_Source
  groups:
    # Macro groups
    NSCLC: "#CD5C5C"         
    HNSCC: "#4682B4"         
    
    # Specific groups 
    NSCLC_LS: "#B22222"      # Dark Red
    NSCLC_Std: "#FA8072"     # Salmon
    HNSCC_LS: "#000080"      # Navy
    HNSCC_Std: "#87CEFA"     # Light Blue
    Healthy: "#2E8B57" 

  highlight: "#FFD700"       # Gold

  heatmap:
    low: "#2166AC"    
    mid: "#F7F7F7"    
    high: "#B2182B"   
  
  plsda:
    positive: "#CD5C5C" 
    negative: "#4682B4" 
    
  distribution:
    mean: "darkred"
    median: "black"

viz:
  min_edge_weight: 0.15 
  heatmap_metadata: ["Group", "Original_Source"]
  merge_case_groups: false
  highlight_pattern: "_LS"

# --- Quality Control ---
qc:
  max_na_row_pct: 0.55   
  max_na_col_pct: 0.20  
  remove_outliers: true
  outlier_conf_level: 0.99 

# --- Imputation (CoDa) ---
imputation:
  method: "czm_multrepl"      

# --- Multivariate & Interpretation ---
multivariate:
  run_plsda: true
  n_comp: 2           
  validation_folds: 5 
  top_n_loadings: 15  

# --- Inference Statistics ---
stats:
  seed: 2025
  n_boot: 1000        
  n_perm: 2000        
  alpha: 0.05         
  fdr_threshold: 0.1 
  n_cores: "auto"

