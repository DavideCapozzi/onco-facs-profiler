name: facs-comp-analysis

channels:
  - conda-forge
  - bioconda
  - nodefaults  # Usa 'nodefaults' invece di 'defaults' per evitare conflitti

pin_subdir: linux-64

dependencies:
  # === CRITICAL: SYSTEM LIBRARIES - LASCIA RISOLVERE AL SOLVER ===
  # NON specificare versioni patch, permetti al solver di trovare combinazioni coerenti
  - libstdcxx-ng>=12.2  # Minimo 12.2 per avere CXXABI_1.3.15
  - libgcc-ng>=12.2
  - libgomp>=12.2
  - sysroot_linux-64>=2.17

  # === BASE R ===
  - r-base=4.3.*
  
  # === DIPENDENZE CRITICHE ESPLICITE ===
  # Questi pacchetti devono essere specificati PRIMA delle loro dipendenti
  - r-lattice  # Richiesto da latticeExtra
  - r-rcolorbrewer  # Richiesto da latticeExtra
  - r-interp  # Dipendenza critica che causa l'errore
  - r-latticeextra  # Caricato da ALDEx2
  
  # === CORE COMPOSITIONALITY PACKAGES ===
  - bioconductor-aldex2
  - r-zcompositions
  - r-compositions>=2.0
  - r-hmisc

  # === PROPELLER (VIA SPECKLE) ===
  - bioconductor-speckle
  - bioconductor-limma

  # === BATCH CORRECTION ===
  - bioconductor-sva

  # === NETWORK ANALYSIS ===
  - r-igraph>=2.0
  - r-tidygraph
  - r-ggraph

  # === CLUSTERING & SURVIVAL ===
  - bioconductor-consensusclusterplus
  - r-survival
  - r-survminer
  - r-wgcna

  # === TIDYVERSE & VISUALIZATION ===
  - r-ggplot2
  - r-dplyr
  - r-tidyr
  - r-tibble
  - r-ggpubr
  - r-cowplot
  - r-viridis
  - r-patchwork  # Utile per composite plots

  # === UTILITY PACKAGES ===
  - r-rmarkdown
  - r-knitr
  - r-pheatmap
  - r-reshape2
  - r-data.table
  - r-dt  # Interactive tables

  # === STATISTICS ===
  - r-pwr
  - bioconductor-multtest

  # === DEVELOPMENT TOOLS ===
  - git
  - make
  - cmake
  
  # === BIOCONDUCTOR CORE ===
  - bioconductor-biobase
  - bioconductor-biocgenerics
  - bioconductor-s4vectors
  - bioconductor-iranges
  - bioconductor-genomicranges

  # === ADDITIONAL USEFUL PACKAGES ===
  - r-devtools  # Per installazioni da GitHub se necessario
  - r-remotes   # Alternative a devtools
  - pandoc      # Per rendering RMarkdown