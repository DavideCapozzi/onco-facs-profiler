name: facs-comp-analysis

channels:
  - conda-forge
  - bioconda
  - nodefaults

pin_subdir: linux-64

dependencies:
  # === SYSTEM LIBRARIES (CRITICAL FOR LINUX/WSL) ===
  # Solver is allowed to pick versions, but min versions ensure modern compiler support
  - libstdcxx-ng>=12.2
  - libgcc-ng>=12.2
  - libgomp>=12.2
  - sysroot_linux-64>=2.17
  # CAIRO IS CRITICAL FOR RSTUDIO SERVER GRAPHICS ON LINUX
  - pango
  - cairo
  - fontconfig

  # === BASE R ===
  - r-base=4.3.*
  
  # === EXPLICIT CRITICAL DEPENDENCIES ===
  # Specified BEFORE dependents to prevent solver conflicts
  - r-lattice          # Required by latticeExtra
  - r-rcolorbrewer     # Required by latticeExtra
  - r-interp           # Critical dependency often causing build failures
  - r-latticeextra     # Loaded by ALDEx2
  - r-cairo            # R interface to cairo graphics (Essential for WSL/Server)

  # === DATA MANIPULATION & VISUALIZATION (TIDYVERSE) ===
  # Includes: ggplot2, dplyr, tidyr, tibble, readr, purrr, stringr, forcats
  - r-tidyverse
  - r-factoextra       # Visualization for multivariate analysis (PCA, Clustering)
  - r-ggpubr           # Publication ready plots
  - r-cowplot          # Plot grid composition
  - r-patchwork        # Advanced plot composition
  - r-viridis          # Colorblind-friendly palettes
  - r-corrplot         # Visualization of correlation matrices
  - r-ggraph           # Network visualization (extends ggplot2)
  - r-ggtern           # Ternary plots
  - r-janitor
  - r-qgraph
  - r-networkcomparisontest 
  - r-psych
  - r-fdrtool

  # === CORE COMPOSITIONALITY PACKAGES ===
  - bioconductor-aldex2       # Primary Method (Bayesian)
  - r-zcompositions           # Imputation and transformation
  - r-compositions>=2.0       # Core CoDA analysis
  - r-hmisc                   # Harrell Miscellaneous (correlation functions)
  - r-vim

  # === PROPELLER (VIA SPECKLE) ===
  - bioconductor-speckle      # Propeller method
  - bioconductor-limma        # Backend for Propeller

  # === BATCH CORRECTION & IMPUTATION ===
  - bioconductor-sva          # ComBat for batch correction (Phase 3 of PDF)
  - r-mice                    # Multivariate Imputation by Chained Equations (Phase 1 of PDF)

  # === NETWORK ANALYSIS ===
  - r-igraph>=2.0
  - r-tidygraph               # Tidy API for graph manipulation

  # === CLUSTERING & SURVIVAL ===
  - bioconductor-consensusclusterplus # Robust clustering (Phase 4)
  - bioconductor-complexheatmap       # Advanced heatmaps (Standard for bioinfo)
  - r-survival                        # Survival analysis core
  - r-survminer                       # Survival plots (Kaplan-Meier)
  - r-wgcna                           # Weighted correlation network analysis

  # === UTILITY PACKAGES ===
  - r-rmarkdown
  - r-knitr
  - r-reshape2
  - r-data.table
  - r-dt               # Interactive tables in RMarkdown
  - r-biocmanager      # Manage Bioconductor packages
  - r-openxlsx
  - r-writexl

  # === STATISTICS ===
  - r-pwr              # Power analysis (Critical per PDF recommendations)
  - bioconductor-multtest
  - r-vegan

  # === BIOCONDUCTOR CORE ===
  - bioconductor-biobase
  - bioconductor-biocgenerics
  - bioconductor-s4vectors
  - bioconductor-iranges
  - bioconductor-genomicranges
  
  # === DEVELOPMENT TOOLS ===
  - git
  - make
  - cmake
  - pandoc             # Required for rendering RMarkdown
  - r-devtools         # Install from GitHub if needed
  - r-remotes          # Lightweight devtools alternative
